{"openapi":"3.0.0","paths":{"/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":"User registered"}},"summary":"Register new user","tags":["auth"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"User logged in"}},"summary":"Login user","tags":["auth"]}},"/users/me":{"get":{"operationId":"UsersController_me","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get current user profile","tags":["users"]}},"/users/users":{"get":{"operationId":"UsersController_users","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get all users","tags":["users"]}},"/products/filter":{"get":{"operationId":"ProductsController_filter","parameters":[{"name":"skip","required":false,"in":"query","description":"Number of records to skip","schema":{"type":"number"}},{"name":"take","required":false,"in":"query","description":"Number of records to take","schema":{"type":"number"}},{"name":"sortField","required":false,"in":"query","description":"Field name to sort by","schema":{"type":"string"}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"type":"string","enum":["asc","desc"]}},{"name":"price__gte","required":false,"in":"query","description":"Minimum price","schema":{"type":"number"}},{"name":"price__lte","required":false,"in":"query","description":"Maximum price","schema":{"type":"number"}},{"name":"categoryId__in","required":false,"in":"query","description":"Comma-separated category IDs","schema":{"type":"string"}},{"name":"brandId__eq","required":false,"in":"query","description":"Filter by brand ID","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductWithRelatedDto"}}}}}},"summary":"Advanced product filtering with pagination and sorting","tags":["products"]}},"/products":{"get":{"operationId":"ProductsController_getAll","parameters":[{"name":"categoryId","required":true,"in":"query","schema":{"type":"string"}},{"name":"search","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"List products","tags":["products"]},"post":{"operationId":"ProductsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create product (Admin)","tags":["products"]}},"/products/{id}":{"get":{"operationId":"ProductsController_getOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"summary":"Get product by id","tags":["products"]},"patch":{"operationId":"ProductsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update product (Admin)","tags":["products"]},"delete":{"operationId":"ProductsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete product (Admin)","tags":["products"]}},"/products/{id}/related":{"get":{"operationId":"ProductsController_getRelated","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"number"}}],"responses":{"200":{"description":"Product with its related products","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductWithRelatedDto"}}}}},"summary":"Get all related products of a product","tags":["products"]}},"/products/related/bulk":{"post":{"operationId":"ProductsController_addRelatedBulk","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRelatedProductsBulkDto"}}}},"responses":{"201":{"description":"Related products added successfully."},"400":{"description":"Validation failed or product not found."}},"summary":"Add multiple related products at once","tags":["products"]},"delete":{"operationId":"ProductsController_removeRelatedBulk","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRelatedProductsBulkDto"}}}},"responses":{"200":{"description":"Related products removed successfully."},"400":{"description":"Validation failed or product not found."}},"summary":"Remove multiple related products at once","tags":["products"]}},"/categories":{"get":{"operationId":"CategoriesController_findAll","parameters":[],"responses":{"200":{"description":""}},"summary":"List categories","tags":["categories"]},"post":{"operationId":"CategoriesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCategoryDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create category (Admin)","tags":["categories"]}},"/categories/{id}":{"get":{"operationId":"CategoriesController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"summary":"Get category by id","tags":["categories"]},"patch":{"operationId":"CategoriesController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCategoryDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update category (Admin)","tags":["categories"]},"delete":{"operationId":"CategoriesController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete category (Admin)","tags":["categories"]}},"/RelatedProducts/related":{"post":{"operationId":"ProductRelationController_addRelated","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRelatedProductDto"}}}},"responses":{"201":{"description":"Related product added successfully."}},"summary":"Add a related product to a product","tags":["RelatedProducts"]},"delete":{"operationId":"ProductRelationController_removeRelated","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRelatedProductDto"}}}},"responses":{"200":{"description":"Related product removed successfully."}},"summary":"Remove a related product from a product","tags":["RelatedProducts"]}},"/RelatedProducts/{id}/related":{"get":{"operationId":"ProductRelationController_getRelated","parameters":[{"name":"id","required":true,"in":"path","description":"Product ID","schema":{"type":"number"}}],"responses":{"200":{"description":"List of related products."}},"summary":"Get all related products of a product","tags":["RelatedProducts"]}},"/brands":{"post":{"operationId":"BrandsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBrandDto"}}}},"responses":{"201":{"description":""}},"security":[{"bearer":[]}],"summary":"Create a brand","tags":["brands"]},"get":{"operationId":"BrandsController_findAll","parameters":[],"responses":{"200":{"description":""}},"summary":"List all brands","tags":["brands"]}},"/brands/{id}":{"get":{"operationId":"BrandsController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"summary":"Get brand by ID","tags":["brands"]},"patch":{"operationId":"BrandsController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBrandDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update a brand","tags":["brands"]},"delete":{"operationId":"BrandsController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Delete a brand","tags":["brands"]}}},"info":{"title":"AlNakheel API","description":"AlNakheel Ecommerce backend API with JWT + RBAC","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"RegisterDto":{"type":"object","properties":{"email":{"type":"string","description":"User Email"},"password":{"type":"string","description":"User password"},"name":{"type":"string","description":"User name"},"role":{"type":"string","description":"User Role","enum":["CUSTOMER","ADMIN"]}},"required":["email","password"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","description":"User Email"},"password":{"type":"string","description":"User password"}},"required":["email","password"]},"RelatedProductDto":{"type":"object","properties":{"name_en":{"type":"string","description":"English Product name"},"name_ar":{"type":"string","description":"Arabic Product name"},"description_en":{"type":"string","description":"English Product description"},"description_ar":{"type":"string","description":"Arabic Product description"},"price":{"type":"number","description":"Product Price"},"image":{"type":"string","description":"Product image"},"categoryId":{"type":"number","description":"Product Category"},"brandId":{"type":"number","description":"Product Brand"},"id":{"type":"number","description":"ID of the related product"}},"required":["name_en","name_ar","price","id"]},"ProductWithRelatedDto":{"type":"object","properties":{"name_en":{"type":"string","description":"English Product name"},"name_ar":{"type":"string","description":"Arabic Product name"},"description_en":{"type":"string","description":"English Product description"},"description_ar":{"type":"string","description":"Arabic Product description"},"price":{"type":"number","description":"Product Price"},"image":{"type":"string","description":"Product image"},"categoryId":{"type":"number","description":"Product Category"},"brandId":{"type":"number","description":"Product Brand"},"id":{"type":"number","description":"Product ID"},"relatedProducts":{"description":"List of related products","type":"array","items":{"$ref":"#/components/schemas/RelatedProductDto"}},"bulkOperations":{"type":"object","description":"Endpoints available for bulk operations on related products","example":{"addBulk":"POST /products/related/bulk","removeBulk":"DELETE /products/related/bulk"}}},"required":["name_en","name_ar","price","id","relatedProducts","bulkOperations"]},"CreateProductDto":{"type":"object","properties":{"name_en":{"type":"string","description":"English Product name"},"name_ar":{"type":"string","description":"Arabic Product name"},"description_en":{"type":"string","description":"English Product description"},"description_ar":{"type":"string","description":"Arabic Product description"},"price":{"type":"number","description":"Product Price"},"image":{"type":"string","description":"Product image"},"categoryId":{"type":"number","description":"Product Category"},"brandId":{"type":"number","description":"Product Brand"}},"required":["name_en","name_ar","price"]},"AddRelatedProductsBulkDto":{"type":"object","properties":{"productId":{"type":"number","description":"The main product ID"},"relatedIds":{"description":"List of related product IDs to add","type":"array","items":{"type":"number"}}},"required":["productId","relatedIds"]},"RemoveRelatedProductsBulkDto":{"type":"object","properties":{"productId":{"type":"number","description":"The main product ID"},"relatedIds":{"description":"List of related product IDs to remove","type":"array","items":{"type":"number"}}},"required":["productId","relatedIds"]},"CreateCategoryDto":{"type":"object","properties":{"name_en":{"type":"string","description":"English Category name"},"name_ar":{"type":"string","description":"Arabic Category name"},"description_en":{"type":"string","description":"English Category description"},"description_ar":{"type":"string","description":"Arabic Category description"},"image":{"type":"string","description":"Category image"},"parentId":{"type":"number","description":"Category Parent"}},"required":["name_en","name_ar"]},"UpdateCategoryDto":{"type":"object","properties":{"name_en":{"type":"string","description":"English Category name"},"name_ar":{"type":"string","description":"Arabic Category name"},"description_en":{"type":"string","description":"English Category description"},"description_ar":{"type":"string","description":"Arabic Category description"},"image":{"type":"string","description":"Category image"},"parentId":{"type":"number","description":"Category Parent"}}},"AddRelatedProductDto":{"type":"object","properties":{"productId":{"type":"number","description":"The main product ID"},"relatedId":{"type":"number","description":"The related product ID"}},"required":["productId","relatedId"]},"RemoveRelatedProductDto":{"type":"object","properties":{"productId":{"type":"number","description":"The main product ID"},"relatedId":{"type":"number","description":"The related product ID to remove"}},"required":["productId","relatedId"]},"CreateBrandDto":{"type":"object","properties":{"name_en":{"type":"string","description":"English Brand name"},"name_ar":{"type":"string","description":"Arabic Brand name"},"description_en":{"type":"string","description":"English Brand description"},"description_ar":{"type":"string","description":"Arabic Brand description"},"image":{"type":"string","description":"Brand image"}},"required":["name_en","name_ar"]},"UpdateBrandDto":{"type":"object","properties":{"name_en":{"type":"string","description":"English Brand name"},"name_ar":{"type":"string","description":"Arabic Brand name"},"description_en":{"type":"string","description":"English Brand description"},"description_ar":{"type":"string","description":"Arabic Brand description"},"image":{"type":"string","description":"Brand image"}}}}}}